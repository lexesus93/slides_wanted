# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenRouter.ai –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ OpenRouter.ai —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∞ OpenAI —Å–ª—É–∂–∏—Ç –∫–∞–∫ fallback –æ–ø—Ü–∏—è.

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞**
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è OpenRouter
OPENROUTER_ENABLED=true
OPENROUTER_API_KEY=sk-or-your-actual-key-here

# OpenAI –∫–∞–∫ fallback
OPENAI_API_KEY=sk-your-openai-key-here

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
AI_DEFAULT_PROVIDER=openrouter
AI_FALLBACK_ENABLED=true
AI_FALLBACK_ORDER=openrouter,openai,anthropic
```

### 2. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞**
```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
make infra-up

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make install

# –ó–∞–ø—É—Å–∫ backend
make dev
```

## üîç –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### **–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ AI —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:3000/api/ai/status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
curl http://localhost:3000/api/ai/providers

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:3000/api/ai/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "data": {
    "providers": ["openrouter", "openai"],
    "health": {
      "openai": true,
      "openrouter": true,
      "anthropic": false
    },
    "currentProvider": "openrouter"
  }
}
```

### **–¢–µ—Å—Ç 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ OpenRouter**

```bash
curl -X POST http://localhost:3000/api/ai/presentations/generate \
  -H "Content-Type: application/json" \
  -d '{
    "topic": "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞",
    "slideCount": 5,
    "audience": "business",
    "style": "formal",
    "language": "ru"
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "data": {
    "title": "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞",
    "slides": [...],
    "provider": "openrouter",
    "model": "openai/gpt-4o"
  }
}
```

### **–¢–µ—Å—Ç 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–ª–∞–π–¥–∞**

```bash
curl -X POST http://localhost:3000/api/ai/slides/generate \
  -H "Content-Type: application/json" \
  -d '{
    "slideNumber": 1,
    "slideTitle": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –ò–ò",
    "context": "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞—Ö –ò–ò",
    "layout": "title"
  }'
```

### **–¢–µ—Å—Ç 4: –ê–Ω–∞–ª–∏–∑ –ª–∞–π–∞—É—Ç–∞**

```bash
curl -X POST http://localhost:3000/api/ai/layouts/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "slideData": {
      "title": "–¢–µ—Å—Ç–æ–≤—ã–π —Å–ª–∞–π–¥",
      "content": ["–ü—É–Ω–∫—Ç 1", "–ü—É–Ω–∫—Ç 2"],
      "layout": "content"
    },
    "targetAudience": "business"
  }'
```

### **–¢–µ—Å—Ç 5: –ü—Ä—è–º–æ–µ AI completion**

```bash
curl -X POST http://localhost:3000/api/ai/complete \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "–°–æ–∑–¥–∞–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Å–ª–∞–π–¥–∞ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö"}
    ],
    "task": "content_generation"
  }'
```

## üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Fallback

### **–¢–µ—Å—Ç 6: Fallback –Ω–∞ OpenAI –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OpenRouter**

1. **–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ OpenRouter** (–∏–∑–º–µ–Ω–∏—Ç–µ API –∫–ª—é—á –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π)
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:3000/api/ai/complete \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "–¢–µ—Å—Ç fallback"}
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "data": {
    "content": "...",
    "provider": "openai",
    "metadata": {
      "fallbackUsed": true
    }
  }
}
```

### **–¢–µ—Å—Ç 7: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ OpenAI
curl -X POST http://localhost:3000/api/ai/providers/switch \
  -H "Content-Type: application/json" \
  -d '{"provider": "openai"}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
curl http://localhost:3000/api/ai/providers
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ backend**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f slides_backend

# –ü–æ–∏—Å–∫ AI –∑–∞–ø—Ä–æ—Å–æ–≤
docker logs slides_backend | grep "AI completion"
```

### **–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
[INFO] Attempting AI completion with provider: openrouter
[INFO] OpenRouter completion successful
[INFO] Presentation structure generated successfully
```

## üö® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### **–¢–µ—Å—Ç 8: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ OpenRouter**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á**
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ fallback –Ω–∞ OpenAI**

### **–¢–µ—Å—Ç 9: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ OpenAI**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≤–µ—Ä–Ω—ã–π OpenAI API –∫–ª—é—á**
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ fallback –Ω–∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
1. **OpenRouter —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
2. **OpenAI –¥–æ—Å—Ç—É–ø–µ–Ω** –∫–∞–∫ fallback
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –ø—Ä–∏ —Å–±–æ—è—Ö
4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. **API endpoints** –æ—Ç–≤–µ—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üìä **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ OpenRouter: < 5 —Å–µ–∫—É–Ω–¥
- –í—Ä–µ–º—è fallback: < 2 —Å–µ–∫—É–Ω–¥
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤: > 95%

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **–ü—Ä–æ–±–ª–µ–º–∞: OpenRouter –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
echo $OPENROUTER_API_KEY

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞
curl https://openrouter.ai/api/v1/models
```

### **–ü—Ä–æ–±–ª–µ–º–∞: OpenAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
echo $OPENAI_API_KEY

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å OpenAI
curl -H "Authorization: Bearer $OPENAI_API_KEY" \
  https://api.openai.com/v1/dashboard/billing/credit_grants
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat .env | grep -E "(OPENROUTER|OPENAI|AI_)"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
make status
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] OpenRouter API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] OpenAI API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ health check
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–Ω–∞–ª–∏–∑ –ª–∞–π–∞—É—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Fallback –Ω–∞ OpenAI —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéâ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

1. **OpenRouter.ai –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä
2. **OpenAI —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–∞–∫ –Ω–∞–¥–µ–∂–Ω—ã–π fallback
3. **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞** –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**üéØ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞: OpenRouter.ai = –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä, OpenAI = Fallback –æ–ø—Ü–∏—è!**
